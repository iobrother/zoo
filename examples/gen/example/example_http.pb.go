// Code generated by protoc-gen-zoo-http. DO NOT EDIT.
// versions:
// - protoc-gen-zoo-http v0.1.0
// - protoc                (unknown)
// source: example/example.proto

package example

import (
	context "context"
	gin "github.com/gin-gonic/gin"
	server "github.com/iobrother/zoo/core/transport/http/server"
)

// Reference imports to suppress errors if they are not otherwise used.
var _ = context.TODO
var _ = gin.New
var _ = server.NewServer

type ExampleHTTPService interface {
	// Login ...
	Login(context.Context, *LoginReq) (*LoginRsp, error)
	// Sms ...
	Sms(context.Context, *SmsReq) (*SmsRsp, error)
}

func RegisterExampleHTTPService(g *gin.RouterGroup, svc ExampleHTTPService) {
	r := g.Group("")
	r.POST("/example/login", _Example_Login0_HTTP_Handler(svc))
	r.POST("/example/sms", _Example_Sms0_HTTP_Handler(svc))
}

func _Example_Login0_HTTP_Handler(svc ExampleHTTPService) gin.HandlerFunc {
	return func(ctx *gin.Context) {
		c := &server.Context{Context: ctx}
		shouldBind := func(req *LoginReq) error {
			if err := c.ShouldBind(req); err != nil {
				return err
			}
			return nil
		}

		var err error
		var req LoginReq
		var rsp *LoginRsp

		if err = shouldBind(&req); err != nil {
			c.SetError(err)
			return
		}
		rsp, err = svc.Login(c.Request.Context(), &req)
		if err != nil {
			c.SetError(err)
			return
		}
		if c.ContentType() == "application/x-protobuf" {
			c.ProtoBuf(200, rsp)
		} else {
			c.JSON(200, rsp)
		}
	}
}
func _Example_Sms0_HTTP_Handler(svc ExampleHTTPService) gin.HandlerFunc {
	return func(ctx *gin.Context) {
		c := &server.Context{Context: ctx}
		shouldBind := func(req *SmsReq) error {
			if err := c.ShouldBind(req); err != nil {
				return err
			}
			return nil
		}

		var err error
		var req SmsReq
		var rsp *SmsRsp

		if err = shouldBind(&req); err != nil {
			c.SetError(err)
			return
		}
		rsp, err = svc.Sms(c.Request.Context(), &req)
		if err != nil {
			c.SetError(err)
			return
		}
		if c.ContentType() == "application/x-protobuf" {
			c.ProtoBuf(200, rsp)
		} else {
			c.JSON(200, rsp)
		}
	}
}
